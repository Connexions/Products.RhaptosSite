<div metal:define-macro="author_links">
    <metal:block tal:define="
       memberid python:(len(request.traverse_subpath) > 0 and request.traverse_subpath[0]) or request.get('author', None);
        member python:here.desecured.getMemberById(memberid);
        member_since python:member.getProperty('approved_time').year;
        author_profile context/@@profile_content;
        auth_links python:author_profile.getAuthLinksForMember(memberid);
        featured_content python:author_profile.getFeaturedContentForMember(memberid);
        ">
       <p></p>
           <tal:links tal:repeat="link auth_links">
	   <dd class="portletItem"><a href="" tal:attributes="href link/getRemoteUrl"><strong tal:content="link/Title">Title of Link</strong>
             <br />
             <tal:image tal:condition="python:hasattr(link.getObject(),'image_thumb')" tal:replace="structure python:link.getObject()['image_thumb']" />
             </a></dd>
            </tal:links>
            <tal:featured tal:repeat="link featured_content">
	      <dd class="portletItem"><a href="" tal:attributes="href python:link.getObject()['contentlink']"><strong tal:content="link/Title">Title of Link</strong><br />
             <tal:image tal:condition="python:hasattr(link.getObject(),'image_thumb')" tal:replace="structure python:link.getObject()['image_thumb']" />
</a></dd>
            </tal:featured>
      </metal:block>
</div>

<div metal:define-macro="portlet_links">
  <dl id="portlet-mylinks" class="portlet">
   <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        <span i18n:translate="box_my_links">My Links</span>
        <span class="portletTopRight"></span>
   </dt>
   <dd>
         <div metal:use-macro="context/portlet_links/macros/author_links"/>
   </dd>
  </dl>
</div>
